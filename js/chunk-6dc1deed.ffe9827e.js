(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dc1deed"],{"0cd8":function(e,t,a){},4791:function(e,t,a){"use strict";a("0cd8")},a43f:function(e,t,a){"use strict";a.r(t);var l=a("7a23"),n={class:"visualizationTitle"},o={class:"select"},r=Object(l["createElementVNode"])("span",{class:"text"},"起始时间",-1),i=Object(l["createElementVNode"])("span",{class:"text"},"结束时间",-1),u=Object(l["createElementVNode"])("span",{class:"text"},"公司名",-1),c=Object(l["createTextVNode"])("查询"),s=Object(l["createElementVNode"])("div",{class:"show"},[Object(l["createElementVNode"])("div",{id:"cName"}),Object(l["createElementVNode"])("div",{id:"total"}),Object(l["createElementVNode"])("div",{id:"byType"})],-1);function d(e,t,a,d,m,v){var p=Object(l["resolveComponent"])("el-date-picker"),O=Object(l["resolveComponent"])("el-input"),b=Object(l["resolveComponent"])("el-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",n,[Object(l["createElementVNode"])("div",o,[r,Object(l["createVNode"])(p,{"popper-class":"startTime",modelValue:d.startTime,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.startTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),i,Object(l["createVNode"])(p,{"popper-class":"endTime",modelValue:d.endTime,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.endTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),u,Object(l["createVNode"])(O,{modelValue:d.cName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.cName=e}),placeholder:"置空可查询按类别总投递量",clearable:""},null,8,["modelValue"]),Object(l["createVNode"])(b,{class:"query",type:"success",onClick:d.query},{default:Object(l["withCtx"])((function(){return[c]})),_:1},8,["onClick"])]),s])}a("4de4"),a("d3b7");var m=a("313e"),v=a("bc3a"),p=a.n(v),O=a("4328"),b=a.n(O),g=a("7068"),f=a("a18c"),N=a("5a0c"),y=a.n(N),j=a("4b90"),S={setup:function(){var e=Object(j["a"])(),t="YYYY-MM-DD HH:mm:ss",a=Object(l["ref"])(""),n=Object(l["ref"])(""),o=Object(l["ref"])(""),r=Object(l["ref"])([]),i=Object(l["ref"])([]),u=Object(l["ref"])(""),c=[{text:"Today",value:function(){return new Date}},{text:"Yesterday",value:function(){var e=new Date;return e.setTime(e.getTime()-864e5),e}},{text:"A week ago",value:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),e}},{text:"A month ago",value:function(){var e=new Date;return e.setTime(e.getTime()-2592e6),e}}],s=Object(l["ref"])(),d=Object(l["ref"])(),v=Object(l["ref"])();Object(l["onMounted"])((function(){m["a"](document.getElementById("byType")).dispose(),s.value=m["a"](document.getElementById("byType")),d.value=document.getElementById("total"),v.value=document.getElementById("cName");var e=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-title")),t=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-title-data")),l=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-title-cName")),c=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-title-time"));if(e&&t&&c){i.value=e,r.value=t,u.value=l,a.value=c[0],n.value=c[1],o.value=u.value;var p=r.value.reduce((function(e,t){return e+t}),0);d.value.innerHTML=u.value?"所选时间范围该公司投递量为：".concat(p," <br/>"):"所选时间范围总投递量为：".concat(p," <br/>"),v.value.innerHTML=u.value?"公司名："+u.value:"总投递量",s.value.setOption({title:{text:"按岗位投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(i.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(u.value)),type:"bar",data:JSON.parse(JSON.stringify(r.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}else console.log("here")})),Object(l["watch"])([r,i,u],(function(){console.log("hi"),console.log(r.value,i.value,u.value),console.log(JSON.parse(JSON.stringify(i.value))),console.log(JSON.parse(JSON.stringify(u.value))),console.log(JSON.parse(JSON.stringify(r.value))),s.value.setOption({title:{text:"按岗位投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(i.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(u.value)),type:"bar",data:JSON.parse(JSON.stringify(r.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}));var O=function(){p()({method:"post",url:"".concat(e,"/api/visualization/company-by-job-title"),data:b.a.stringify({startTime:y()(a.value).format(t),endTime:y()(n.value).format(t),cName:o.value}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data.status,l=e.data.data;if("0"===t)if(0===l.length&&o.value)Object(g["a"])({title:"暂无投递数据，请确认公司名称及起止时间是否正确",message:"query get null",type:"warning"});else{var c=l[0],s=l.filter((function(e){return e.cName===c.cName}));if(l.length!==s.length)Object(g["a"])({title:"无法确定要查询的公司，请细化公司名称",message:"query get null",type:"warning"});else{Object(g["a"])({title:"查询成功",message:"query successfully",type:"success"});var m=l.reduce((function(e,t){return e+t.total}),0);u.value=c.cName||"",d.value.innerHTML=u.value?"所选时间范围该公司投递量为：".concat(m," <br/>"):"所选时间范围总投递量为：".concat(m," <br/>"),v.value.innerHTML=u.value?"公司名："+u.value:"总投递量",localStorage.setItem("KnowFutureVisualization-job-title-cName",JSON.stringify(u.value)),localStorage.setItem("KnowFutureVisualization-job-title-time",JSON.stringify([a.value,n.value])),r.value=[],i.value=[];for(var p=l.length,O=0;O<p;O++)r.value.push(l[O].total),i.value.push(l[O].title);console.log(r),console.log(i),localStorage.setItem("KnowFutureVisualization-job-title",JSON.stringify(i.value)),localStorage.setItem("KnowFutureVisualization-job-title-data",JSON.stringify(r.value))}}else"401"===t&&(Object(g["a"])({title:"验证过期",message:e.data.message,type:"error"}),f["a"].push("/home/login"))})),p.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}))};return{startTime:a,endTime:n,cName:o,shortcuts:c,query:O}}},h=(a("4791"),a("d959")),V=a.n(h);const J=V()(S,[["render",d]]);t["default"]=J}}]);
//# sourceMappingURL=chunk-6dc1deed.ffe9827e.js.map