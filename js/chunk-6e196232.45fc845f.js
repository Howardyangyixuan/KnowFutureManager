(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e196232"],{"12c3":function(e,t,a){"use strict";a("1400")},1400:function(e,t,a){},"6da0":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"visualizationType"},l={class:"select"},r=Object(n["createElementVNode"])("span",{class:"text"},"起始时间",-1),u=Object(n["createElementVNode"])("span",{class:"text"},"结束时间",-1),c=Object(n["createElementVNode"])("span",{class:"text"},"公司名",-1),i=Object(n["createTextVNode"])("查询"),s=Object(n["createElementVNode"])("div",{class:"show"},[Object(n["createElementVNode"])("div",{id:"cName"}),Object(n["createElementVNode"])("div",{id:"total"}),Object(n["createElementVNode"])("div",{id:"byType"})],-1);function d(e,t,a,d,m,p){var v=Object(n["resolveComponent"])("el-date-picker"),O=Object(n["resolveComponent"])("el-input"),b=Object(n["resolveComponent"])("el-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",l,[r,Object(n["createVNode"])(v,{"popper-class":"startTime",modelValue:d.startTime,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.startTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),u,Object(n["createVNode"])(v,{"popper-class":"endTime",modelValue:d.endTime,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.endTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),c,Object(n["createVNode"])(O,{modelValue:d.cName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.cName=e}),placeholder:"置空可查询按类别总投递量",clearable:""},null,8,["modelValue"]),Object(n["createVNode"])(b,{class:"query",type:"success",onClick:d.query},{default:Object(n["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]),s])}a("4de4"),a("d3b7");var m=a("313e"),p=a("bc3a"),v=a.n(p),O=a("4328"),b=a.n(O),y=a("7068"),g=a("a18c"),f=a("5a0c"),N=a.n(f),j=a("4b90"),S={setup:function(){var e=Object(j["a"])(),t="YYYY-MM-DD HH:mm:ss",a=Object(n["ref"])(""),o=Object(n["ref"])(""),l=Object(n["ref"])(""),r=Object(n["ref"])([]),u=Object(n["ref"])([]),c=Object(n["ref"])(""),i=[{text:"Today",value:function(){return new Date}},{text:"Yesterday",value:function(){var e=new Date;return e.setTime(e.getTime()-864e5),e}},{text:"A week ago",value:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),e}},{text:"A month ago",value:function(){var e=new Date;return e.setTime(e.getTime()-2592e6),e}}],s=Object(n["ref"])(),d=Object(n["ref"])(),p=Object(n["ref"])();Object(n["onMounted"])((function(){m["a"](document.getElementById("byType")).dispose(),s.value=m["a"](document.getElementById("byType")),d.value=document.getElementById("total"),p.value=document.getElementById("cName");var e=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-type")),t=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-type-data")),n=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-type-cName")),i=JSON.parse(localStorage.getItem("KnowFutureVisualization-job-type-time"));if(e&&t&&i){u.value=e,r.value=t,c.value=n,a.value=i[0],o.value=i[1],l.value=c.value;var v=r.value.reduce((function(e,t){return e+t}),0);d.value.innerHTML=c.value?"所选时间范围该公司投递量为：".concat(v," <br/>"):"所选时间范围总投递量为：".concat(v," <br/>"),p.value.innerHTML=c.value?"公司名："+c.value:"总投递量",s.value.setOption({title:{text:"按类别投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(u.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(c.value)),type:"bar",data:JSON.parse(JSON.stringify(r.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}else console.log("here")})),Object(n["watch"])([r,u,c],(function(){console.log("hi"),console.log(r.value,u.value,c.value),console.log(JSON.parse(JSON.stringify(u.value))),console.log(JSON.parse(JSON.stringify(c.value))),console.log(JSON.parse(JSON.stringify(r.value))),s.value.setOption({title:{text:"按类别投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(u.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(c.value)),type:"bar",data:JSON.parse(JSON.stringify(r.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}));var O=function(){v()({method:"post",url:"".concat(e,"/api/visualization/company-by-job-type"),data:b.a.stringify({startTime:N()(a.value).format(t),endTime:N()(o.value).format(t),cName:l.value}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data.status,n=e.data.data;if("0"===t)if(0===n.length&&l.value)Object(y["a"])({title:"暂无投递数据，请确认公司名称及起止时间是否正确",message:"query get null",type:"warning"});else{var i=n[0],s=n.filter((function(e){return e.cName===i.cName}));if(n.length!==s.length)Object(y["a"])({title:"无法确定要查询的公司，请细化公司名称",message:"query get null",type:"warning"});else{Object(y["a"])({title:"查询成功",message:"query successfully",type:"success"});var m=n.reduce((function(e,t){return e+t.total}),0);c.value=i.cName||"",d.value.innerHTML=c.value?"所选时间范围该公司投递量为：".concat(m," <br/>"):"所选时间范围总投递量为：".concat(m," <br/>"),p.value.innerHTML=c.value?"公司名："+c.value:"总投递量",localStorage.setItem("KnowFutureVisualization-job-type-cName",JSON.stringify(c.value)),localStorage.setItem("KnowFutureVisualization-job-type-time",JSON.stringify([a.value,o.value])),r.value=[],u.value=[];for(var v=n.length,O=0;O<v;O++)r.value.push(n[O].total),u.value.push(n[O].jobType);console.log(r),console.log(u),localStorage.setItem("KnowFutureVisualization-job-type",JSON.stringify(u.value)),localStorage.setItem("KnowFutureVisualization-job-type-data",JSON.stringify(r.value))}}else"401"===t&&(Object(y["a"])({title:"验证过期",message:e.data.message,type:"error"}),g["a"].push("/home/login"))})),v.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}))};return{startTime:a,endTime:o,cName:l,shortcuts:i,query:O}}},h=(a("12c3"),a("d959")),V=a.n(h);const J=V()(S,[["render",d]]);t["default"]=J}}]);
//# sourceMappingURL=chunk-6e196232.45fc845f.js.map