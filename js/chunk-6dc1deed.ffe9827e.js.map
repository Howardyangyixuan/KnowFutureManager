{"version":3,"sources":["webpack:///./src/components/VisualizationTitle.vue?a247","webpack:///./src/components/VisualizationTitle.vue","webpack:///./src/components/VisualizationTitle.vue?3130"],"names":["class","id","popper-class","startTime","type","placeholder","shortcuts","endTime","cName","clearable","query","setup","baseUrl","FORMAT","startTimeRef","endTimeRef","cNameRef","data","xAxis","text","value","Date","date","setTime","getTime","chartByDay","divTotal","divCName","echarts","document","getElementById","dispose","xAxisTmp","JSON","parse","localStorage","getItem","dataTmp","cNameTmp","timeTmp","sum","reduce","item","innerHTML","setOption","title","tooltip","stringify","yAxis","series","name","dataZoom","xAxisIndex","console","log","method","url","format","headers","then","res","status","byType","length","message","first","arr","filter","total","setItem","n","i","push","router","a","interceptors","request","use","config","token","Authorization","error","Promise","reject","__exports__","render"],"mappings":"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","file":"js/chunk-6dc1deed.ffe9827e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VisualizationTitle.vue?vue&type=style&index=0&id=31d738f2&lang=css\"","<template>\n  <div class=\"visualizationTitle\">\n    <div class=\"select\">\n      <span class=\"text\">起始时间</span>\n      <el-date-picker\n          popper-class=\"startTime\"\n          v-model=\"startTime\"\n          type=\"datetime\"\n          placeholder=\"Select date and time\"\n          :shortcuts=\"shortcuts\"\n      />\n      <span class=\"text\">结束时间</span>\n      <el-date-picker\n          popper-class=\"endTime\"\n          v-model=\"endTime\"\n          type=\"datetime\"\n          placeholder=\"Select date and time\"\n          :shortcuts=\"shortcuts\"\n      />\n      <span class=\"text\">公司名</span>\n      <el-input v-model=\"cName\" placeholder=\"置空可查询按类别总投递量\" clearable />\n      <el-button class=\"query\" type=\"success\" @click=\"query\">查询</el-button>\n      </div>\n      <div class=\"show\">\n      <div id=\"cName\"></div>\n      <div id=\"total\"></div>\n      <div id=\"byType\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {onMounted, ref, watch} from \"vue\"\nimport * as echarts from 'echarts';\nimport axios from \"axios\"\nimport qs from \"qs\"\nimport {ElNotification} from \"element-plus\"\nimport router from \"@/router\"\nimport dayjs from \"dayjs\"\nimport {getApiRootPath} from \"@/utils/url\"\n\n\nexport default {\n  setup() {\n    const baseUrl = getApiRootPath()\n      const FORMAT = 'YYYY-MM-DD HH:mm:ss'\n      const startTimeRef = ref('')\n      const endTimeRef = ref('')\n      const cNameRef = ref('')\n    let data = ref([])\n    let xAxis = ref([])\n    let cName = ref('')\n\n      const shortcuts = [\n      {\n        text: 'Today',\n        value: () => new Date(),\n      },\n      {\n        text: 'Yesterday',\n        value: () => {\n        const date = new Date()\n        date.setTime(date.getTime() - 3600 * 1000 * 24)\n        return date\n      },\n      },\n      {\n        text: 'A week ago',\n        value: () => {\n        const date = new Date()\n        date.setTime(date.getTime() - 3600 * 1000 * 24 * 7)\n        return date\n      },\n      },\n        {\n          text: 'A month ago',\n          value: () => {\n            const date = new Date()\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 30)\n            return date\n          },\n        },\n      ]\n\n      const chartByDay = ref()\n    const divTotal = ref()\n    const divCName = ref()\n    onMounted(()=>{\n      echarts.init(document.getElementById('byType')).dispose()\n      chartByDay.value = echarts.init(document.getElementById('byType'));\n      divTotal.value = document.getElementById('total');\n      divCName.value = document.getElementById('cName');\n      const xAxisTmp = JSON.parse(localStorage.getItem('KnowFutureVisualization-job-title'))\n      const dataTmp = JSON.parse(localStorage.getItem('KnowFutureVisualization-job-title-data'))\n      const cNameTmp = JSON.parse(localStorage.getItem('KnowFutureVisualization-job-title-cName'))\n      const timeTmp = JSON.parse(localStorage.getItem('KnowFutureVisualization-job-title-time'))\n      if (!(xAxisTmp && dataTmp && timeTmp)) {\n        console.log(\"here\")\n        return\n      }\n      xAxis.value = xAxisTmp\n      data.value = dataTmp\n      cName.value = cNameTmp\n      startTimeRef.value = timeTmp[0]\n      endTimeRef.value = timeTmp[1]\n      cNameRef.value = cName.value\n      const sum = data.value.reduce((sum,item) => sum+item,0)\n      divTotal.value.innerHTML = cName.value ? `所选时间范围该公司投递量为：${sum} <br/>` : `所选时间范围总投递量为：${sum} <br/>`\n      divCName.value.innerHTML = cName.value ? \"公司名：\"+ cName.value : \"总投递量\";\n      chartByDay.value.setOption({\n        title: {\n          text: '按岗位投递量'\n        },\n        tooltip: {},\n        xAxis: {\n          data:JSON.parse(JSON.stringify(xAxis.value))\n          // data:xAxis.value\n        },\n        yAxis: {},\n        series: [\n          {\n            // name: cName.value,\n            name: JSON.parse(JSON.stringify(cName.value)),\n            type: 'bar',\n            // data: data.value\n            data: JSON.parse(JSON.stringify(data.value))\n          }\n        ],\n        dataZoom: [\n          {\n            id: 'dataZoomX',\n            type: 'inside',\n            xAxisIndex: [0],\n          }\n        ]\n      });\n    })\n    watch([data, xAxis, cName],()=>{\n      console.log(\"hi\")\n      console.log(data.value, xAxis.value, cName.value)\n      console.log(JSON.parse(JSON.stringify(xAxis.value)))\n      console.log(JSON.parse(JSON.stringify(cName.value)))\n      console.log(JSON.parse(JSON.stringify(data.value)))\n      chartByDay.value.setOption({\n        title: {\n          text: '按岗位投递量'\n        },\n        tooltip: {},\n        xAxis: {\n          data:JSON.parse(JSON.stringify(xAxis.value))\n          // data:xAxis.value\n        },\n        yAxis: {},\n        series: [\n          {\n            // name: cName.value,\n            name: JSON.parse(JSON.stringify(cName.value)),\n            type: 'bar',\n            // data: data.value\n            data: JSON.parse(JSON.stringify(data.value))\n          }\n        ],\n        dataZoom: [\n          {\n            id: 'dataZoomX',\n            type: 'inside',\n            xAxisIndex: [0],\n          }\n        ]\n      });\n    })\n    const query = () => {\n// 基于准备好的dom，初始化echarts实例\n      axios({\n        method: \"post\",\n        url: `${baseUrl}/api/visualization/company-by-job-title`,\n        data: qs.stringify({\n              // startTime: \"2022-12-27 00:00:00\",\n              // endTime: \"2023-12-28 00:00:00\",\n          startTime:dayjs(startTimeRef.value).format(FORMAT),\n          endTime:dayjs(endTimeRef.value).format(FORMAT),\n              cName: cNameRef.value\n            }\n        ),\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then((res) => {\n        const status = res.data.status\n        const {data:byType} = res.data\n        if (status === \"0\") {\n          if (byType.length === 0 && cNameRef.value) {\n            ElNotification({\n              title: \"暂无投递数据，请确认公司名称及起止时间是否正确\",\n              message: \"query get null\",\n              type: \"warning\",\n            });\n          } else {\n            const first = byType[0]\n            const arr = byType.filter(item=>item.cName === first.cName)\n            if (byType.length !== arr.length) {\n              ElNotification({\n                title: \"无法确定要查询的公司，请细化公司名称\",\n                message: \"query get null\",\n                type: \"warning\",\n              });\n            } else {\n            ElNotification({\n              title: \"查询成功\",\n              message: \"query successfully\",\n              type: \"success\",\n            });\n            const sum = byType.reduce((sum,item) => sum+item.total,0)\n            cName.value = first.cName || \"\"\n            divTotal.value.innerHTML = cName.value ? `所选时间范围该公司投递量为：${sum} <br/>` : `所选时间范围总投递量为：${sum} <br/>`\n            divCName.value.innerHTML = cName.value ? \"公司名：\"+ cName.value : \"总投递量\";\n            localStorage.setItem('KnowFutureVisualization-job-title-cName', JSON.stringify(cName.value))\n            localStorage.setItem('KnowFutureVisualization-job-title-time', JSON.stringify([startTimeRef.value,endTimeRef.value]))\n            data.value = []\n            xAxis.value = []\n              const n = byType.length\n            for (let i = 0; i < n; i++) {\n                data.value.push(byType[i].total)\n                xAxis.value.push(byType[i].title)\n            }\n            console.log(data)\n            console.log(xAxis)\n            localStorage.setItem('KnowFutureVisualization-job-title', JSON.stringify(xAxis.value))\n            localStorage.setItem('KnowFutureVisualization-job-title-data', JSON.stringify(data.value))\n          }\n          }\n        } else if ( status === '401') {\n          ElNotification({\n            title: \"验证过期\",\n            message: res.data.message,\n            type: \"error\",\n          });\n          router.push(\"/home/login\");\n        }\n\n      });\n      axios.interceptors.request.use(\n          function (config) {\n            // 在发送请求之前做些什么\n            let token = localStorage.getItem('token');\n            if (token) {\n              config.headers.Authorization = token;\n            }\n            return config;\n          },\n          function (error) {\n            // 对请求错误做些什么\n            return Promise.reject(error);\n          }\n      );\n    }\n    return {\n        startTime: startTimeRef,\n      endTime: endTimeRef,\n      cName: cNameRef,\n      shortcuts,\n      query,\n    }\n  }\n}\n</script>\n\n<style>\n.visualizationTitle{\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  width: 100vw;\n\n}\n.select{\n  height: 250px;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: start;\n  margin: 5px;\n}\n.query{\n  width: 220px;\n}\n\n@media (max-width: 500px) {\n  .el-picker-panel {        width: 87vw !important;    }\n  .el-picker-panel__content  {        width: 45vw !important;    }\n  .el-picker-panel__icon-btn {\n    width:20px;\n  }\n}\n\n\n.show{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items:center;\n  height: 60vh;\n  width:  100vw;\n}\n#byType{\n  height: 55vh;\n  width:  100vw;\n}\n\n</style>\n","import { render } from \"./VisualizationTitle.vue?vue&type=template&id=31d738f2\"\nimport script from \"./VisualizationTitle.vue?vue&type=script&lang=js\"\nexport * from \"./VisualizationTitle.vue?vue&type=script&lang=js\"\n\nimport \"./VisualizationTitle.vue?vue&type=style&index=0&id=31d738f2&lang=css\"\n\nimport exportComponent from \"/Users/yangyixuan/knowFutureManager/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}