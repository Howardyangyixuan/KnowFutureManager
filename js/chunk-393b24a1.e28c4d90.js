(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-393b24a1"],{"5cf4":function(e,t,a){"use strict";a.r(t);var l=a("7a23"),n={class:"visualization"},o={class:"select"},r=Object(l["createElementVNode"])("span",{class:"text"},"起始时间",-1),u=Object(l["createElementVNode"])("span",{class:"text"},"结束时间",-1),c=Object(l["createElementVNode"])("span",{class:"text"},"公司名",-1),s=Object(l["createTextVNode"])("查询"),i=Object(l["createElementVNode"])("div",{class:"show"},[Object(l["createElementVNode"])("div",{id:"cName"}),Object(l["createElementVNode"])("div",{id:"total"}),Object(l["createElementVNode"])("div",{id:"byDay"})],-1);function d(e,t,a,d,m,v){var p=Object(l["resolveComponent"])("el-date-picker"),f=Object(l["resolveComponent"])("el-input"),O=Object(l["resolveComponent"])("el-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",n,[Object(l["createElementVNode"])("div",o,[r,Object(l["createVNode"])(p,{"popper-class":"startTime",modelValue:d.startTime,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.startTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),u,Object(l["createVNode"])(p,{"popper-class":"endTime",modelValue:d.endTime,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.endTime=e}),type:"datetime",placeholder:"Select date and time",shortcuts:d.shortcuts},null,8,["modelValue","shortcuts"]),c,Object(l["createVNode"])(f,{modelValue:d.cName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.cName=e}),placeholder:"置空可查询总投递量",clearable:""},null,8,["modelValue"]),Object(l["createVNode"])(O,{class:"query",type:"success",onClick:d.query},{default:Object(l["withCtx"])((function(){return[s]})),_:1},8,["onClick"])]),i])}a("4de4"),a("d3b7");var m=a("313e"),v=a("bc3a"),p=a.n(v),f=a("4328"),O=a.n(f),g=a("7068"),b=a("a18c"),y=a("5a0c"),N=a.n(y),j=a("4b90"),S={setup:function(){var e=Object(j["a"])(),t="YYYY-MM-DD HH:mm:ss",a="YYYY-MM-DD",n=Object(l["ref"])(""),o=Object(l["ref"])(""),r=Object(l["ref"])(""),u=Object(l["ref"])([]),c=Object(l["ref"])([]),s=Object(l["ref"])(""),i=[{text:"Today",value:function(){return new Date}},{text:"Yesterday",value:function(){var e=new Date;return e.setTime(e.getTime()-864e5),e}},{text:"A week ago",value:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),e}},{text:"A month ago",value:function(){var e=new Date;return e.setTime(e.getTime()-2592e6),e}}],d=Object(l["ref"])(),v=Object(l["ref"])(),f=Object(l["ref"])();Object(l["onMounted"])((function(){m["a"](document.getElementById("byDay")).dispose(),d.value=m["a"](document.getElementById("byDay")),v.value=document.getElementById("total"),f.value=document.getElementById("cName");var e=JSON.parse(localStorage.getItem("KnowFutureVisualization-xAxis")),t=JSON.parse(localStorage.getItem("KnowFutureVisualization-data")),a=JSON.parse(localStorage.getItem("KnowFutureVisualization-cName"));if(e&&t){c.value=e,u.value=t,s.value=a,n.value=c.value[0],o.value=c.value[c.value.length-1],r.value=s.value;var l=u.value.reduce((function(e,t){return e+t}),0);v.value.innerHTML=s.value?"所选时间范围该公司投递量为：".concat(l," <br/>"):"所选时间范围总投递量为：".concat(l," <br/>"),f.value.innerHTML=s.value?"公司名："+s.value:"总投递量",d.value.setOption({title:{text:"每日投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(c.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(s.value)),type:"bar",data:JSON.parse(JSON.stringify(u.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}else console.log("here")})),Object(l["watch"])([u,c,s],(function(){console.log("hi"),console.log(u.value,c.value,s.value),console.log(JSON.parse(JSON.stringify(c.value))),console.log(JSON.parse(JSON.stringify(s.value))),console.log(JSON.parse(JSON.stringify(u.value))),d.value.setOption({title:{text:"每日投递量"},tooltip:{},xAxis:{data:JSON.parse(JSON.stringify(c.value))},yAxis:{},series:[{name:JSON.parse(JSON.stringify(s.value)),type:"bar",data:JSON.parse(JSON.stringify(u.value))}],dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0]}]})}));var y=function(){p()({method:"post",url:"".concat(e,"/api/visualization/company-total-by-day"),data:O.a.stringify({startTime:N()(n.value).format(t),endTime:N()(o.value).format(t),cName:r.value}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data.status,l=e.data.data;if("0"===t)if(0===l.length&&r.value)Object(g["a"])({title:"暂无投递数据，请确认公司名称及起止时间是否正确",message:"query get null",type:"warning"});else{var i=l[0],d=l.filter((function(e){return e.cName===i.cName}));if(l.length!==d.length)Object(g["a"])({title:"无法确定要查询的公司，请细化公司名称",message:"query get null",type:"warning"});else{Object(g["a"])({title:"查询成功",message:"query successfully",type:"success"});var m=l.reduce((function(e,t){return e+t.total}),0);s.value=i.cName||"",v.value.innerHTML=s.value?"所选时间范围该公司投递量为：".concat(m," <br/>"):"所选时间范围总投递量为：".concat(m," <br/>"),f.value.innerHTML=s.value?"公司名："+s.value:"总投递量",localStorage.setItem("KnowFutureVisualization-cName",JSON.stringify(s.value)),u.value=[],c.value=[];var p=0,O=new Date(N()(o.value).format(a)).getTime()-new Date(N()(n.value).format(a)).getTime(),y=O/864e5;console.log(e.data);var j=N()(n.value);console.log(y);for(var S=0;S<=y;S++){var h=j.format(a);l[p]&&h===N()(l[p].days).format(a)?(u.value.push(l[p].total),p++):u.value.push(0),c.value.push(j.format(a)),j=j.add(1,"day")}console.log(u),console.log(c),localStorage.setItem("KnowFutureVisualization-xAxis",JSON.stringify(c.value)),localStorage.setItem("KnowFutureVisualization-data",JSON.stringify(u.value))}}else"401"===t&&(Object(g["a"])({title:"验证过期",message:e.data.message,type:"error"}),b["a"].push("/home/login"))})),p.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}))};return{startTime:n,endTime:o,cName:r,shortcuts:i,query:y}}},h=(a("a32a"),a("d959")),x=a.n(h);const V=x()(S,[["render",d]]);t["default"]=V},a32a:function(e,t,a){"use strict";a("cede")},cede:function(e,t,a){}}]);
//# sourceMappingURL=chunk-393b24a1.e28c4d90.js.map